# Eksterna HTML Stranica za Kontakt - Slanje na Bazu

# Pregled

Ovaj projekt uključivao je kreiranje kontakt forme koja šalje JSON podatke na Supabase server. Projekt je koristio React, Supabase, TypeScript i Tailwind CSS.

# Integracija sa Supabase

## Vanjska HTML Kontakt Stranica

U našu vanjsku HTML kontakt stranicu uključili smo CDN uvoz za Supabase jer nije bila unutar direktorija komponenti i zahtijevala je slanje JSON podataka na Supabase server.

## Dodavanje u `ContactUs.html`

```html
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script type="module" src="push-kontakt.js"></script>
```

## Postavljanje Baze Podataka

Kako bismo pratili kontaktne zahtjeve i poruke primljene od strane servera, kreirana je nova SQL tabela pod nazivom `kontakt_upiti`:

```sql
create table public.kontakt_upiti (
  id bigint generated by default as identity,
  created_at timestamp with time zone not null default now(),
  ime character varying null,
  prezime character varying null,
  broj_tel character varying null,
  email character varying null,
  poruka text null,
  ip_adresa text null,
  constraint kontakt_upiti_pkey primary key (id)
) tablespace pg_default;
```

## JavaScript Logika za Podnošenje Kontakt Forme

Kreiran je novi JavaScript fajl za rukovanje logikom podnošenja kontakt forme i upravljanje varijablama okruženja.

### `env_vars.js`

```javascript
export const url_path = SUPABASE_URL;
export const api_key = SUPABASE_KEY;
```

### `push-kontakt.js`

```javascript
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';
import { url_path, api_key } from './env-vars.js';

document.addEventListener('DOMContentLoaded', function() {
    
    // Inicijalizacija Supabase klijenta
    const supabase = createClient(url_path, api_key);

    // Event listener za podnošenje forme
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        // Preuzimanje podataka iz forme
        let ime = document.getElementById("ime").value;
        let prezime = document.getElementById("prezime").value;
        let email = document.getElementById("email").value;
        let telefon = document.getElementById("telefon").value;
        let poruka = document.getElementById("poruka").value;

        // Objekt sa podacima iz forme
        let submit_data = {
            ime: ime,
            prezime: prezime,
            email: email,
            telefon: telefon,
            poruka: poruka
        };

        for (const key in submit_data) {
            console.log(`${key}: ${submit_data[key]}`);
        }

        const { error } = await supabase
            .from('kontakt_upiti')
            .insert({
                ime: submit_data.ime,
                prezime: submit_data.prezime,
                email: submit_data.email,
                broj_tel: submit_data.telefon,
                poruka: submit_data.poruka,
                ip_adresa: '1234'
            });

        if (error) {
            console.error('Greška prilikom unosa podataka:', error.message);
        } else {
            console.log('Podaci uspješno uneseni:', data);
        }
    });
});
```

Ova dokumentacija pruža strukturiran pregled koraka poduzetih za integraciju Supabase u projekt, postavljanje baze podataka i implementaciju logike podnošenja kontakt forme.